package org.opentestsystem.ap.tms.packager.util;

import lombok.extern.slf4j.Slf4j;
import org.apache.commons.lang3.StringUtils;
import org.opentestsystem.ap.common.management.ItemManager;
import org.opentestsystem.ap.common.model.Item;
import org.springframework.stereotype.Component;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

@Slf4j
@Component
public class ItemUtil {

    private ItemManager itemManager;

    public ItemUtil(ItemManager itemManager) {
        this.itemManager = itemManager;
    }

    public Map<String, Item> getItemMetaData(List<String> itemIds) {
        final HashMap<String, Item> timsItems = new HashMap<>();

        itemIds.forEach(itemId -> {
            if (StringUtils.isNotBlank(itemId)) {
                timsItems.put(itemId, itemManager.findCurrentItem(itemId));
            }
        });

        return timsItems;
    }
}