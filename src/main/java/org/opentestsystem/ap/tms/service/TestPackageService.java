package org.opentestsystem.ap.tms.service;

import org.opentestsystem.ap.tms.model.TestPackage;
import org.opentestsystem.ap.tms.model.TestPackageCommit;
import org.opentestsystem.ap.tms.model.TestPackageResponse;

import java.util.Optional;

/**
 * Service handling actions upon a test package
 */
public interface TestPackageService {

    /**
     * Creates a new test package
     *
     * @param testPackage the {@link TestPackage} to create
     * @return the {@link TestPackageResponse}
     */
    TestPackageResponse create(TestPackage testPackage);

    /**
     * Saves a test package if it exists and is locked for edit.  If not present a new test package is created.
     *
     * @param packageId the package id to update
     * @param testPackage the {@link TestPackage} to update
     * @return the {@link TestPackageResponse} with the updated test package
     */
    TestPackageResponse save(String packageId, TestPackage testPackage);

    /**
     * Finds a test package by test package id
     *
     * @param testPackageId the test package id
     * @return {@link TestPackageResponse} if found otherwise empty
     */
    Optional<TestPackageResponse> find(String testPackageId);

    /**
     * Commits the item unlocking it for other users to edit the test package
     *
     * @param testPackageCommit the {@link TestPackageCommit} to persist
     * @return the updated {@link TestPackageResponse}
     */
    TestPackageResponse commit(TestPackageCommit testPackageCommit);

    /**
     * Locks the test package for edit
     *
     * @param testPackageId the test package id to lock
     * @return the updated {@link TestPackageResponse} with the lock
     */
    TestPackageResponse lock(String testPackageId);

    /**
     * Discards a user's current edits
     *
     * @param testPackageId the test package id to lock
     */
    void discard(String testPackageId);
}
